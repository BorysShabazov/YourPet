import{j as t,r as u,S as b,u as P,a as se,b as oe,x as ne,D as ae,E as re,k as le}from"./index-aaec3c9d.js";import{E as ie,d as $,c as F,a as p,f as ce,g as de,F as xe,b as me}from"./index.esm-b9efb2a2.js";import{e as pe,a as ue}from"./petsSelectors-c34b0a96.js";import{a as he}from"./noticesSelectors-ad4f8b4c.js";import"./index-edd9ed20.js";import"./index-a87a0ed8.js";const U=e=>{const o=e.getDate().toString().padStart(2,"0"),s=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getFullYear().toString();return[o,s,n].join("-")},w=({inputName:e,containerStyles:o,styles:s="absolute -bottom-[20px] text-red text-xs font-normal"})=>t.jsx(ie,{name:e,children:n=>{const r=t.jsx("p",{className:s,children:n});return o?t.jsx("div",{className:o,children:r}):r}}),k="flex flex-col",fe=`${k} relative mb-[45px] gap-[12px] md:mb-[87px]`,ge=`${k} mb-[24px] gap-[20px] md:gap-[24px] md:mb-[40px]`,be=`${k} mb-[24px] gap-[20px] md:flex-row md:mx-[40px] md:gap-[45px] xl:gap-[80px]`,B=({sectionName:e,children:o})=>{const s=n=>{if(n==="chooseOption")return fe;if(n==="personalDetails")return ge;if(n==="moreInfo")return be};return t.jsx("div",{className:s(e),children:o})},z="px-[16px] py-[8px] rounded-[40px] justify-center items-center w-fit  text-sm font-medium font-manrope tracking-wide cursor-pointer",ye=`${z} bg-lightBlue text-blue`,je=`${z} bg-blue text-background`,f=({category:e,name:o,value:s,style:n,children:r})=>{const l=e===s?je:ye;return t.jsxs("label",{className:n||l,children:[t.jsx($,{name:o,type:"radio",value:s,className:"w-0 h-0 invisible"}),r]})},we=({category:e})=>t.jsxs(B,{sectionName:"chooseOption",children:[t.jsx(f,{category:e,name:"category",value:"own",children:"your pet"}),t.jsx(f,{category:e,name:"category",value:"sell",children:"sell"}),t.jsx(f,{category:e,name:"category",value:"lost",children:"lost"}),t.jsx(f,{category:e,name:"category",value:"found",children:"found"}),t.jsx(f,{category:e,name:"category",value:"good-hands",children:"in good hands"}),t.jsx(w,{inputName:"category"})]}),ve="relative flex flex-col text-black text-sm font-medium font-manrope md:text-xl md:leading-relaxed",_="w-[100%] h-[40px] px-[16px] py-[8px] rounded-[40px] border border-blue justify-start items-center md:h-[48px] md:py-[12px]",Se=`${_} border-red`,Ne="absolute -bottom-[18px] ml-4 text-red text-xs font-normal",g=({name:e,type:o="text",value:s,placeholder:n,callback:r,error:l,children:c})=>{const[d,x]=u.useState(new Date),m=l?Se:_;return t.jsxs("label",{className:ve,children:[c,o!=="date"?t.jsx($,{name:e,type:o,value:s,placeholder:n,className:m}):t.jsx(pe,{name:e,selected:d,onChange:j=>{x(j),r("birth",U(j))},dateFormat:"dd-MM-yyyy",className:m}),t.jsx(w,{inputName:e,styles:Ne})]})},$e=({errors:e,setFieldValue:o,category:s,title:n,name:r,birth:l,type:c})=>t.jsxs(B,{sectionName:"personalDetails",children:[s!=="own"&&t.jsx(g,{name:"title",value:n,placeholder:"Title of add",error:e.title,children:"Title of add"}),s!=="found"&&t.jsxs(t.Fragment,{children:[t.jsx(g,{name:"name",value:r,placeholder:"Type name pet",error:e.name,children:"Pet's name"}),t.jsx(g,{name:"birth",value:l,type:"date",callback:o,error:e.birth,children:"Date of birth"})]}),t.jsx(g,{name:"type",value:c,placeholder:"Type of pet",error:e.type,children:"Type"})]}),Fe=({petImage:e,setPhoto:o,imageError:s})=>{const[n,r]=u.useState(e?URL.createObjectURL(e):""),l=n!=="";return t.jsxs("div",{className:"relative flex flex-col items-center gap-[13px]",children:[t.jsxs("label",{className:`flex flex-col gap-[8px] items-center mx-auto ${l?"pointer-events-none":"cursor-pointer"}`,children:[!l&&t.jsx("p",{className:"text-black text-sm font-medium font-manrope",children:"Add pet's photo:"}),t.jsxs("div",{className:"relative w-[112px] h-[112px] bg-lightBlue bg-cover bg rounded-[20px] md:w-[182px] md:h-[182px]",children:[l?t.jsx("img",{className:"w-[100%] h-[100%] rounded-[20px] object-cover",src:n,alt:"Pet photo"}):t.jsx(b,{id:"icon-add-cross",className:"absolute top-[50%] left-[50%] -translate-x-[50%] -translate-y-[50%] w-[24px] ",fill:"#54ADFF"}),t.jsx("input",{id:"petImage",name:"petImage",type:"file",onChange:c=>{const d=c.target.files[0],x=URL.createObjectURL(d);o(d),r(x)},className:"w-0 h-0 invisible"})]})]}),l&&t.jsxs("label",{htmlFor:"petImage",className:"flex flex-row items-center cursor-pointer",children:[t.jsx(b,{id:"icon-camera",className:"flex items-center w-fit mr-[8px]",fill:"transparent",stroke:"#54ADFF"}),t.jsx("p",{className:"text-black text-xs font-normal font-manrope leading-snug tracking-wide",children:"Edit photo"})]}),s&&t.jsx("p",{className:"absolute -bottom-[18px] break-keep text-red text-xs font-normal",children:s})]})},I="flex flex-row align-center px-[16px] py-[8px] w-[105px] rounded-[40px] justify-center items-center w-fit  text-sm text-base font-normal font-manrope tracking-wide leading-normal cursor-pointer",C=`${I} text-grey`,A=`${I} bg-blue text-background`,ke="mb-[4px]",L="relative flex flex-col text-black text-sm font-medium font-manrope md:text-xl md:leading-relaxed",Be="border-red",Ie="absolute -bottom-[18px] ml-4 text-red text-xs font-normal",q="flex items-center w-fit",De=({errors:e,category:o,sex:s,price:n,location:r,petImage:l,setPhoto:c,comments:d})=>{const x=m=>s===""&&m==="female"?"#F43F5E":s===""&&m==="male"?"#54ADFF":s===m?"#FFF":"#888888";return t.jsxs(B,{sectionName:"moreInfo",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"relative flex flex-col gap-[16px] mb-[16px]",children:[t.jsx("p",{className:`${L} -mb-[8px] items-center`,children:"The sex"}),t.jsxs("div",{className:"flex flex-row mx-auto gap-[16px]",children:[t.jsxs(f,{category:s,name:"sex",value:"female",style:s==="female"?A:C,children:[t.jsx(b,{id:"icon-female",className:q,fill:"transparent",stroke:x("female")}),"Female"]}),t.jsxs(f,{category:s,name:"sex",value:"male",style:`${I} ${s==="male"?A:C}`,children:[t.jsx(b,{id:"icon-male",className:q,fill:"transparent",stroke:x("male")}),"Male"]})]}),t.jsx(w,{inputName:"sex",containerStyles:"absolute bottom-[5px] flex justify-center w-[100%] text-red text-xs font-normal"})]}),t.jsx(Fe,{petImage:l,setPhoto:c,imageError:e.petImage})]}),t.jsxs("div",{className:"flex flex-col gap-[20px] md:gap-[24px] md:min-w-[395px]",children:[o!=="own"&&t.jsx(g,{name:"location",value:r,error:e.location,placeholder:"Add some location",children:"Location"}),o==="sell"&&t.jsx(g,{name:"price",type:"number",value:n,error:e.price,placeholder:"Add some price",children:"Price"}),t.jsxs("label",{className:`${L} h-[100%]`,children:[t.jsx("p",{className:ke,children:"Comments"}),t.jsx($,{as:"textarea",name:"comments",value:d,placeholder:"Type about your friend",className:`flex w-[100%] h-[100%] px-[16px] py-[8px] border border-blue rounded-[20px] resize-none ${e.comments?Be:""}`}),t.jsx(w,{inputName:"comments",styles:Ie})]})]})]})},Pe=/^(0[1-9]|[1-2][0-9]|3[0-1])-(0[1-9]|1[0-2])-\d{4}$/,Ce=3,Ae=F({category:p().oneOf(["own","sell","lost","found","good-hands"],"Invalid category").required("You have to choose the category")}),Le=F({title:p().max(20).when("category",{is:"own",then:e=>e.notRequired(),otherwise:e=>e.required("You have to write the title")}),name:p().min(2).max(16).when("category",{is:"found",then:e=>e.notRequired(),otherwise:e=>e.required("You have to write the pet's name")}),birth:p().matches(Pe,{message:"Date must have DD-MM-YYYY format"}).when("category",{is:"found",then:e=>e.notRequired(),otherwise:e=>e.required("You have to write the pet's birthdate")}),type:p().min(2).max(16).required("You have to write the pet's type")}),qe=F({sex:p().oneOf(["male","female"],"Invalid sex").required("You have to choose the sex"),petImage:ce().required("You need to add the pet's photo").test("fileSize","File too large",e=>e&&e.size<=Ce*1048576),price:de().min(1,"Price can't be lower than 0 or equal to it").when("category",{is:"sell",then:e=>e.required("You have to write the price"),otherwise:e=>e.notRequired()}),location:p().when("category",{is:"own",then:e=>e.notRequired(),otherwise:e=>e.required("You have to write location")}),comments:p().max(120)}),M="px-[16px] py-[8px] rounded-[40px] flex justify-center items-center gap-[12px] w-[100%] text-sm font-medium font-manrope tracking-wide",Me=()=>{const{step:e,setStep:o,category:s,setCategory:n}=u.useContext(D),r=P(ue),l=P(he),c=se(),d=oe(),x=ne(),m=u.useRef(x.state??"/"),j=()=>{e>1?o(a=>a-1):c(m.current),e===2&&n("own")},V=a=>{const i=new FormData;return i.append("category",a.category),i.append("type",a.type),i.append("sex",a.sex),i.append("image",a.petImage),i.append("comments",a.comments),a.category!=="found"&&(i.append("name",a.name),i.append("birthDate",a.birth)),a.category!=="own"&&(i.append("title",a.title),i.append("location",a.location)),a.category==="sell"&&i.append("price",a.price),i};return t.jsx(xe,{initialValues:{category:s,title:"",name:"",birth:U(new Date),type:"",sex:"",petImage:null,price:"",location:"",comments:""},validateOnChange:!1,validateOnBlur:!1,validationSchema:e===1&&Ae||e===2&&Le||e===3&&qe,onSubmit:(a,i)=>{if(e===1&&n(a.category),e===3){const h=V(a);d(s==="own"?ae(h):re(h)).then(y=>{y.error||(i.resetForm(),c(s==="own"?"/user":"/notices/own"))})}e<3&&o(h=>h+1)},children:({handleSubmit:a,setFieldValue:i,errors:h,values:{category:y,title:X,name:Z,birth:G,type:H,sex:J,petImage:K,price:Q,location:W,comments:ee}})=>t.jsxs(me,{onSubmit:a,encType:"multipart/form-data",children:[e===1&&t.jsx(we,{category:y}),e===2&&t.jsx($e,{setFieldValue:i,errors:h,category:y,title:X,name:Z,birth:G,type:H}),e===3&&t.jsx(De,{setPhoto:te=>{i("petImage",te)},category:y,errors:h,sex:J,price:Q,location:W,petImage:K,comments:ee}),t.jsxs("div",{className:"flex flex-col justify-center px-[4px] w-[100%] gap-[4px] md:flex-row-reverse md",children:[t.jsxs("button",{type:"button",className:`${M} border ${r||l?"bg-lightBlue border-lightBlue":"bg-blue border-blue hover:blue-gradient"}  text-background md:px-[28px] md:w-[248px] `,disabled:r||l,onClick:a,children:[e===3?"Done":"Next",t.jsx(b,{id:"icon-pawprint",className:"w-fit",fill:"white"})]}),t.jsxs("button",{type:"button",className:`${M} text-blue hover:border hover:border-blue md:w-[116px]`,disabled:r||l,onClick:j,children:[t.jsx(b,{id:"icon-arrow-left",className:"w-fit",stroke:"#54ADFF"}),e===1?"Сancel":"Back"]})]})]})})},R={own:"Add pet",sell:"Add pet for sell",lost:"Add lost pet",found:"Add found pet"},Re=({category:e,step:o})=>t.jsx("div",{className:`ml-[12px] mb-[24px] text-neutral-900 text-xl font-medium font-manrope ${o===3&&"md:text-center"} md:text-[28px]`,children:R[e]||R.own}),v="flex flex-col justify-center text-[10px] font-medium font-manrope md:text-base  md:leading-relaxed",Y="text-grey mb-[12px]",S="text-blue mb-[12px]",T="text-green mb-[12px]",Ye="w-[80px] h-[8px] rounded-lg md:w-[120px]",E=`${Ye} bg-lightBlue`,N="w-[80px] h-[8px] bg-blue rounded-lg md:w-[120px]",O="w-[80px] h-[8px] bg-green rounded-lg md:w-[120px]",Te=()=>{const{step:e}=u.useContext(D);return t.jsxs("div",{className:"w-[100%] flex flex-row justify-center mb-[16px] gap-[12px] md:gap-[16px] md:mb-[24px]",children:[t.jsxs("div",{className:`${v}`,children:[t.jsx("p",{className:`
          ${e===1?S:T}`,children:"Choose option"}),t.jsx("div",{className:`${e===1?N:O}`})]}),t.jsxs("div",{className:`${v}`,children:[t.jsx("p",{className:`
          ${e===1?Y:""} 
          ${e===2?S:""} 
          ${e===3?T:""}`,children:"Personal details"}),t.jsx("div",{className:`
          ${e===1?E:""} 
          ${e===2?N:""} 
          ${e===3?O:""}`})]}),t.jsxs("div",{className:`${v}`,children:[t.jsx("p",{className:`${e===3?S:Y}`,children:"More info"}),t.jsx("div",{className:`${e===3?N:E}`})]})]})},D=u.createContext(null),Ee=()=>{const[e,o]=u.useState("own"),[s,n]=u.useState(1);return t.jsx(D.Provider,{value:{category:e,setCategory:o,step:s,setStep:n},children:t.jsx(le,{children:t.jsxs("div",{className:"container mx-auto w-fit h-fit mb-[24px] px-[8px] pt-[20px] pb-[9px] bg-white rounded-[40px] shadow-default md:px-[32px] md:pb-[20px]",children:[t.jsx(Re,{category:e,step:s}),t.jsx(Te,{}),t.jsx(Me,{})]})})})},Ze=()=>t.jsx(t.Fragment,{children:t.jsx(Ee,{})});export{Ze as default};
