import{j as e,r as d,S as g,u as se,a as ae,c as ne,q as oe,w as le,x as re}from"./index-acd679b7.js";import{E as U,d as u,c as I,a as x,f as ie,g as ce,F as xe,b as de}from"./index.esm-18036a8d.js";import{e as me,a as pe}from"./petsSelectors-6a9af7f3.js";import"./index-145b7eeb.js";const w=({inputName:t,styles:n="absolute -bottom-[20px] text-red text-xs font-normal"})=>e.jsx(U,{name:t,children:a=>e.jsx("p",{className:n,children:a})}),ue="px-[16px] py-[8px] rounded-[40px] justify-center items-center w-fit  text-sm font-medium font-manrope tracking-wide",he="bg-lightBlue text-blue",fe="bg-blue text-background",y=({category:t,name:n,value:a,children:l})=>e.jsxs("label",{className:`${ue} ${t===a?fe:he}`,children:[e.jsx(u,{name:n,type:"radio",value:a,className:"w-0 h-0 invisible"}),l]}),ge=({category:t})=>e.jsxs("div",{className:"relative flex flex-col mb-[45px] gap-[12px] md:mb-[87px]",children:[e.jsx(y,{category:t,name:"category",value:"own",children:"your pet"}),e.jsx(y,{category:t,name:"category",value:"sell",children:"sell"}),e.jsx(y,{category:t,name:"category",value:"lost",children:"lost"}),e.jsx(y,{category:t,name:"category",value:"found",children:"found"}),e.jsx(y,{category:t,name:"category",value:"good-hands",children:"in good hands"}),e.jsx(w,{inputName:"category"})]}),V=t=>{const n=t.getDate().toString().padStart(2,"0"),a=(t.getMonth()+1).toString().padStart(2,"0"),l=t.getFullYear().toString();return[n,a,l].join("-")},be="relative flex flex-col text-black text-sm font-medium font-manrope md:text-xl md:leading-relaxed",A="w-[100%] h-[40px] px-[16px] py-[8px] rounded-[40px] border border-blue justify-start items-center md:h-[48px] md:py-[12px]",C="border-red",je="absolute -bottom-[18px] ml-4 text-red text-xs font-normal",v=({name:t,type:n="text",value:a,placeholder:l,callback:r,error:i,children:m})=>{const[h,b]=d.useState(new Date);return e.jsxs("label",{className:be,children:[m,n!=="date"?e.jsx(u,{name:t,type:n,value:a,placeholder:l,className:`${A} ${i?C:""}`}):e.jsx(me,{name:t,selected:h,onChange:p=>{b(p),r("birth",V(p))},dateFormat:"dd-MM-yyyy",className:`${A} ${i?C:""}`}),e.jsx(w,{inputName:t,styles:je})]})},ye=({errors:t,setFieldValue:n,category:a,title:l,name:r,birth:i,type:m})=>e.jsxs("div",{className:"flex flex-col mb-[24px] gap-[20px] md:gap-[24px] md:mb-[40px]",children:[a!=="own"&&e.jsx(v,{name:"title",value:l,placeholder:"Title of add",error:t.title,children:"Title of add"}),a!=="found"&&e.jsxs(e.Fragment,{children:[e.jsx(v,{name:"name",value:r,placeholder:"Type name pet",error:t.name,children:"Pet's name"}),e.jsx(v,{name:"birth",value:i,type:"date",callback:n,error:t.birth,children:"Date of birth"})]}),e.jsx(v,{name:"type",value:m,placeholder:"Type of pet",error:t.type,children:"Type"})]}),q="flex flex-row align-center  px-[16px] py-[8px] rounded-[40px] justify-center items-center w-fit  text-sm text-base font-normal font-manrope tracking-wide leading-normal",L="text-grey",M="bg-blue text-background",S="mb-[4px]",N="relative flex flex-col text-black text-sm font-medium font-manrope md:text-xl md:leading-relaxed",Y="w-[100%] h-[40px] px-[16px] py-[8px] rounded-[40px] border border-blue justify-start items-center md:h-[48px] md:py-[12px]",$="border-red",F="absolute -bottom-[18px] ml-4 text-red text-xs font-normal",we=({errors:t,category:n,sex:a,price:l,location:r,setPhoto:i,comments:m})=>{const[h,b]=d.useState(""),p=s=>a===""&&s==="female"?"#F43F5E":a===""&&s==="male"?"#54ADFF":a===s?"#FFF":"#888888",f=h!=="";return e.jsxs("div",{className:"flex flex-col mb-[24px] gap-[20px] md:flex-row md:mx-[40px] md:gap-[45px] xl:gap-[80px]",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"relative flex flex-col gap-[16px] mb-[16px]",children:[e.jsx("p",{className:`${N} -mb-[8px] items-center`,children:"The sex"}),e.jsxs("div",{className:"flex flex-row mx-auto gap-[16px]",children:[e.jsxs("label",{className:`${q} ${a==="female"?M:L}`,children:[e.jsx(u,{name:"sex",type:"radio",value:"female",className:"w-0 h-0 invisible"}),e.jsx(g,{id:"icon-female",className:"flex items-center w-fit",fill:"transparent",stroke:p("female")}),"Female"]}),e.jsxs("label",{className:`${q} ${a==="male"?M:L}`,children:[e.jsx(u,{name:"sex",type:"radio",value:"male",className:"w-0 h-0 invisible"}),e.jsx(g,{id:"icon-male",className:"flex items-center w-fit",fill:"transparent",stroke:p("male")}),"Male"]})]}),e.jsx(U,{name:"sex",children:s=>e.jsx("div",{className:"absolute -bottom-[10px] flex justify-center w-[100%] text-red text-xs font-normal",children:e.jsx("p",{className:"w-fit",children:s})})})]}),e.jsxs("div",{className:"relative flex flex-col items-center gap-[13px]",children:[e.jsxs("label",{className:`flex flex-col gap-[8px] items-center mx-auto ${f?"pointer-events-none":""}`,children:[!f&&e.jsx("p",{className:"text-black text-sm font-medium font-manrope",children:"Add pet's photo:"}),e.jsxs("div",{className:"relative w-[112px] h-[112px] bg-lightBlue bg-cover bg rounded-[20px] md:w-[182px] md:h-[182px]",children:[f?e.jsx("img",{className:"w-[100%] h-[100%] rounded-[20px] object-cover",src:h,alt:"Pet photo"}):e.jsx(g,{id:"icon-add-cross",className:"absolute top-[50%] left-[50%] -translate-x-[50%] -translate-y-[50%] w-[24px] ",fill:"#54ADFF"}),e.jsx("input",{id:"petImage",name:"petImage",type:"file",onChange:s=>{const o=s.target.files[0],c=URL.createObjectURL(o);i(o),b(c)},className:"w-0 h-0 invisible"})]})]}),f&&e.jsxs("label",{htmlFor:"petImage",className:"flex flex-row items-center",children:[e.jsx(g,{id:"icon-camera",className:"flex items-center w-fit mr-[8px]",fill:"transparent",stroke:"#54ADFF"}),e.jsx("p",{className:"text-black text-xs font-normal font-manrope leading-snug tracking-wide",children:"Edit photo"})]}),t.petImage&&e.jsx("p",{className:"absolute -bottom-[18px] break-keep text-red text-xs font-normal",children:t.petImage})]})]}),e.jsxs("div",{className:"flex flex-col gap-[20px] md:gap-[24px] md:min-w-[395px]",children:[n!=="own"&&e.jsxs("label",{className:N,children:[e.jsx("p",{className:S,children:"Location"}),e.jsx(u,{name:"location",type:"text",value:r,placeholder:"Add some location",className:`${Y} ${t.location&&t.location!==""?$:""}`}),e.jsx(w,{inputName:"location",styles:F})]}),n==="sell"&&e.jsxs("label",{className:N,children:[e.jsx("p",{className:S,children:"Price"}),e.jsx(u,{name:"price",type:"number",value:l,placeholder:"Add some price",className:`${Y} ${t.price&&t.price!==""?$:""}`}),e.jsx(w,{inputName:"price",styles:F})]}),e.jsxs("label",{className:`${N} h-[100%]`,children:[e.jsx("p",{className:S,children:"Comments"}),e.jsx(u,{as:"textarea",name:"comments",value:m,placeholder:"Type about your friend",className:`flex w-[100%] h-[100%] px-[16px] py-[8px] border border-blue rounded-[20px] resize-none ${t.comments&&t.comments!==""?$:""}`}),e.jsx(w,{inputName:"comments",styles:F})]})]})]})},ve=/^(0[1-9]|[1-2][0-9]|3[0-1])-(0[1-9]|1[0-2])-\d{4}$/,Ne=3,Se=I({category:x().oneOf(["own","sell","lost","found","good-hands"],"Invalid category").required("You have to choose the category")}),$e=I({title:x().max(20).when("category",{is:"own",then:t=>t.notRequired(),otherwise:t=>t.required("You have to write the title")}),name:x().min(2).max(16).when("category",{is:"found",then:t=>t.notRequired(),otherwise:t=>t.required("You have to write the pet's name")}),birth:x().matches(ve,{message:"Date must have DD-MM-YYYY format"}).when("category",{is:"found",then:t=>t.notRequired(),otherwise:t=>t.required("You have to write the pet's birthdate")}),type:x().min(2).max(16).required("You have to write the pet's type")}),Fe=I({sex:x().oneOf(["male","female"],"Invalid sex").required("You have to choose the sex"),petImage:ie().required("You need to add the pet's photo").test("fileSize","File too large",t=>t&&t.size<=Ne*1048576),price:ce().min(1,"Price can't be lower than 0 or equal to it").when("category",{is:"sell",then:t=>t.required("You have to write the price"),otherwise:t=>t.notRequired()}),location:x().when("category",{is:"own",then:t=>t.notRequired(),otherwise:t=>t.required("You have to write location")}),comments:x().max(120)}),T="px-[16px] py-[8px] rounded-[40px] flex justify-center items-center gap-[12px] w-[100%] text-sm font-medium font-manrope tracking-wide",ke=()=>{const{step:t,setStep:n,category:a,setCategory:l}=d.useContext(D),r=se(pe),i=ae(),m=ne(),h=oe(),b=d.useRef(h.state??"/"),p=()=>{t>1?n(s=>s-1):i(b.current),t===2&&l("own")},f=s=>{const o=new FormData;return o.append("category",s.category),o.append("type",s.type),o.append("sex",s.sex),o.append("image",s.petImage),o.append("comments",s.comments),s.category!=="found"&&(o.append("name",s.name),o.append("birthDate",s.birth)),s.category!=="own"&&(o.append("title",s.title),o.append("location",s.location)),s.category==="sell"&&o.append("price",s.price),o};return e.jsx(xe,{initialValues:{category:a,title:"",name:"",birth:V(new Date),type:"",sex:"",petImage:null,price:"",location:"",comments:""},validateOnChange:!1,validateOnBlur:!1,validationSchema:t===1&&Se||t===2&&$e||t===3&&Fe,onSubmit:(s,o)=>{if(t===1&&l(s.category),t===3){const c=f(s);m(a==="own"?le(c):re(c)).then(j=>{j.error||(o.resetForm(),i(a==="own"?"/user":"/notices/sell"))})}t<3&&n(c=>c+1)},children:({handleSubmit:s,setFieldValue:o,errors:c,values:{category:j,title:X,name:Z,birth:G,type:H,sex:J,petImage:K,price:Q,location:W,comments:ee}})=>e.jsxs(de,{onSubmit:s,encType:"multipart/form-data",children:[t===1&&e.jsx(ge,{category:j}),t===2&&e.jsx(ye,{setFieldValue:o,errors:c,category:j,title:X,name:Z,birth:G,type:H}),t===3&&e.jsx(we,{setPhoto:te=>{o("petImage",te)},category:j,errors:c,sex:J,price:Q,location:W,petImage:K,comments:ee}),e.jsxs("div",{className:"flex flex-col justify-center px-[4px] w-[100%] gap-[4px] md:flex-row-reverse md",children:[e.jsxs("button",{type:"button",className:`${T} border ${r?"bg-lightBlue border-lightBlue":"bg-blue border-blue hover:blue-gradient"}  text-background md:px-[28px] md:w-[248px] `,disabled:r,onClick:s,children:[t===3?"Done":"Next",e.jsx(g,{id:"icon-pawprint",className:"w-fit",fill:"white"})]}),e.jsxs("button",{type:"button",className:`${T} text-blue hover:border hover:border-blue md:w-[116px]`,disabled:r,onClick:p,children:[e.jsx(g,{id:"icon-arrow-left",className:"w-fit",stroke:"#54ADFF"}),t===1?"Сancel":"Back"]})]})]})})},R={own:"Add pet",sell:"Add pet for sell",lost:"Add lost pet",found:"Add found pet"},Be=({category:t,step:n})=>e.jsx("div",{className:`ml-[12px] mb-[24px] text-neutral-900 text-xl font-medium font-manrope ${n===3&&"md:text-center"} md:text-[28px]`,children:R[t]||R.own}),k="flex flex-col justify-center text-[10px] font-medium font-manrope md:text-base  md:leading-relaxed",E="text-grey mb-[12px]",B="text-blue mb-[12px]",O="text-green mb-[12px]",Pe="w-[80px] h-[8px] rounded-lg md:w-[120px]",_=`${Pe} bg-lightBlue`,P="w-[80px] h-[8px] bg-blue rounded-lg md:w-[120px]",z="w-[80px] h-[8px] bg-green rounded-lg md:w-[120px]",Ie=()=>{const{step:t}=d.useContext(D);return e.jsxs("div",{className:"w-[100%] flex flex-row justify-center mb-[16px] gap-[12px] md:gap-[16px] md:mb-[24px]",children:[e.jsxs("div",{className:`${k}`,children:[e.jsx("p",{className:`
          ${t===1?B:O}`,children:"Choose option"}),e.jsx("div",{className:`${t===1?P:z}`})]}),e.jsxs("div",{className:`${k}`,children:[e.jsx("p",{className:`
          ${t===1?E:""} 
          ${t===2?B:""} 
          ${t===3?O:""}`,children:"Personal details"}),e.jsx("div",{className:`
          ${t===1?_:""} 
          ${t===2?P:""} 
          ${t===3?z:""}`})]}),e.jsxs("div",{className:`${k}`,children:[e.jsx("p",{className:`${t===3?B:E}`,children:"More info"}),e.jsx("div",{className:`${t===3?P:_}`})]})]})},De=({children:t})=>e.jsx("div",{className:"w-[100vw] h-[100vh] pt-[68px] bg-[url('src/images/mobile_bg.png')] xl:bg-[url('src/images/desktop_bg.png')] md:bg-[url('src/images/tablet_bg.png')] bg-center bg-cover bg-no-repeat",children:t}),D=d.createContext(null),Ae=()=>{const[t,n]=d.useState("own"),[a,l]=d.useState(1);return e.jsx(D.Provider,{value:{category:t,setCategory:n,step:a,setStep:l},children:e.jsx(De,{children:e.jsxs("div",{className:"container mx-auto w-fit h-fit mb-[24px] px-[8px] pt-[20px] pb-[9px] bg-white rounded-[40px] shadow-default md:px-[32px] md:pb-[20px]",children:[e.jsx(Be,{category:t,step:a}),e.jsx(Ie,{}),e.jsx(ke,{})]})})})},Ye=()=>e.jsx(e.Fragment,{children:e.jsx(Ae,{})});export{Ye as default};
