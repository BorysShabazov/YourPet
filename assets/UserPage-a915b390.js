import{u as M,c as L,d as P,r as c,s as V,j as e,S as v,L as I,t as q,B as A,v as H,g as Y,w as _}from"./index-de4c3b95.js";import{c as Z,a as S,u as G}from"./index.esm-0fbd9c0d.js";import{e as J,g as K}from"./petsSelectors-313a3431.js";import{M as O,D as Q}from"./DeleteModal-d81c7d64.js";import{f as W}from"./index-40f51879.js";import"./index-47df9cb9.js";const X=/^[A-Za-z]+$/,ee=/^\+[0-9]{12}$/,te=Z().shape({city:S().max(60),name:S().min(2,"Too Short").max(16,"Too Long, max 16").matches(X,"Name must contain only characters").required("Name is Required"),email:S().email("Enter a valid Email").required("Email is Required"),phone:S().matches(ee,"Format: +380123456789")}),D="pl-4 absolute -bottom-5 text-rose-500 text-xs font-normal top-6 left-[60px] xl:left-[85px]",k="transition duration-200 ease-in-out cursor-pointer hover:opacity-80",C="text-neutral-900 text-sm font-semibold font-['Manrope'] tracking-wide mdOnly:text-[16px] ",F=" outline-offset-0 outline-0  border border-blue outline-none text-neutral-900 text-xs font-normal font-['Manrope'] tracking-wide w-[190px] h-6 px-3 py-1 rounded-[20px] border border-blue-400 justify-start items-center gap-[191px] inline-flex md:w-[255px]  xl:w-[255px]",se=({onTogleLeavingModal:x})=>{const s=M(L),g=M(i=>i.auth.isRequestActive),b=P(),[o,a]=c.useState(null),[n,h]=c.useState(!1),[j,y]=c.useState(null),[N,m]=c.useState(!1),[t,l]=c.useState(!1);c.useEffect(()=>{n||y("")},[n]);const u=i=>typeof i=="string"&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/.test(i)?i:Date.now(),r=G({initialValues:{name:s.name||"",email:s.email||"",birthday:u(s.birthday),phone:s.phone||"",city:s.city||""},validateOnChange:!1,validateOnBlur:!0,validationSchema:te,onSubmit:({name:i,email:p,birthday:U,phone:R,city:T})=>{const E={name:i,email:p,birthday:U,phone:R,city:T};j&&t&&(E.avatar=o);const B=d(E);b(V(B)),m(!1),h(!1)}}),f=r.errors,w=r.values,d=i=>{const p=new FormData;return p.append("avatar",i.avatar),p.append("name",i.name),p.append("email",i.email),p.append("birthday",i.birthday),p.append("phone",i.phone),p.append("city",i.city),p};function $(i){const p=new FileReader;if(p.onloadend=function(){y(p.result)},i)p.readAsDataURL(i),m(!0);else return}const z=()=>{h(!1),m(!1),l(!1),r.setFieldValue("name",s.name),r.setFieldValue("email",s.email),r.setFieldValue("birthday",u(s.birthday)),r.setFieldValue("phone",s.phone),r.setFieldValue("city",s.city)};return e.jsxs("form",{noValidate:!0,autoComplete:"off",className:"flex flex-col flex-wrap-reverse",onSubmit:r.handleSubmit,children:[e.jsx("div",{className:`absolute top-[14px] right-[14px] ${k}`,children:n?e.jsx("div",{onClick:z,children:e.jsx(v,{id:"icon-cross",size:24,stroke:"#54ADFF",fill:"transparent",className:k})}):e.jsx("div",{onClick:()=>{h(!0)},children:e.jsx(v,{id:"icon-edit",size:24,fill:"#54ADFF",className:k})})}),e.jsxs("div",{className:"mdOnly:flex flex-row-reverse gap-[71px]",children:[e.jsxs("div",{className:"flex justify-center",children:[e.jsxs("label",{htmlFor:"avatar",className:"flex justify-center flex-col gap-[5px]",children:[e.jsx("div",{className:`flex justify-center mb-[14px]  w-[182px] h-[182px] rounded-[40px] bg-slate-100 items-center overflow-hidden ${n&&k}`,children:g?e.jsx("div",{className:"text-center",children:e.jsx(O,{})}):e.jsx("img",{className:" object-cover  rounded-[40px] w-[182px] h-[182px]",src:j||s.avatarURL,alt:"User Avatar"})}),N?e.jsxs("div",{className:"flex justify-center mb-[14px] gap-2 h-6",children:[e.jsx("div",{onClick:i=>{i.preventDefault(),m(!1),l(!0)},children:e.jsx(v,{id:"icon-check",size:24,stroke:"#54ADFF",fill:"transparent",className:k})}),"Confirm",e.jsx("div",{onClick:i=>{i.preventDefault(),m(!1),y(null)},children:e.jsx(v,{id:"icon-cross",size:24,stroke:"#54ADFF",fill:"transparent",className:k})})]}):e.jsxs("div",{className:n?`flex flex-row justify-center gap-[5px] mb-[14px] ${k} h-6`:"flex flex-row justify-center gap-[5px] mb-[14px] opacity-0 h-6",children:[e.jsx(v,{id:"icon-camera",size:24,stroke:"#54ADFF",fill:"transparent",className:k}),"Edit photo"]})]}),e.jsx("div",{children:e.jsx("input",{className:"hidden",type:n&&!N?"file":"",id:"avatar",name:"avatar",accept:"image/jpeg, image/png",onChange:i=>{const p=i.target.files[0];$(p),a(p)}})})]}),e.jsxs("div",{className:"flex flex-col gap-[20px]",children:[e.jsxs("div",{className:"flex justify-between relative",children:[e.jsx("label",{className:C,htmlFor:"name",children:"Name:"}),e.jsx("input",{className:`${F} ${f.name&&"border-rose-400"}`,type:"text",id:"name",name:"name",value:w.name,onChange:r.handleChange,readOnly:!n}),f.name&&e.jsx("p",{className:D,children:f.name})]}),e.jsxs("div",{className:"flex justify-between w-full relative",children:[e.jsx("label",{className:C,htmlFor:"email",children:"Email:"}),e.jsx("input",{className:`${F} ${f.email&&"border-rose-400"}`,type:"text",id:"email",name:"email",value:w.email,onChange:r.handleChange,readOnly:!n}),f.email&&e.jsx("p",{className:D,children:f.email})]}),e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("label",{className:C,htmlFor:"birthday",children:"Birthday:"}),e.jsx("div",{children:e.jsx(J,{selected:new Date(w.birthday),onChange:i=>{r.setFieldValue("birthday",i),console.log()},readOnly:!n,dateFormat:"dd-MM-yyyy",className:F})})]}),e.jsxs("div",{className:"flex justify-between w-full relative",children:[e.jsx("label",{className:C,htmlFor:"phone",children:"Phone:"}),e.jsx("input",{className:`${F} ${f.phone&&"border-rose-400"} ${!n&&"bg-transparent"}`,type:"tel",id:"phone",name:"phone",placeholder:n?"+380123456789":"",value:w.phone,onChange:r.handleChange,disabled:!n}),f.phone&&e.jsx("p",{className:D,children:f.phone})]}),e.jsxs("div",{className:"flex justify-between relative",children:[e.jsx("label",{className:C,htmlFor:"city",children:"City:"}),e.jsx("input",{className:`${F} ${f.city&&"border-rose-400"}`,type:"text",id:"city",name:"city",value:w.city,onChange:r.handleChange,readOnly:!n}),f.city&&e.jsx("p",{className:D,children:f.city})]}),n?e.jsx("div",{className:"w-full h-6 flex justify-end",children:e.jsx("button",{className:"flex justify-center w-[248px] text-stone-50 text-sm font-bold font-['Manrope'] tracking-wide h-[31px] px-[107px] py-1.5 bg-blue rounded-[40px] md:justify-center items-center gap-2 inline-flex md:w-[255px]  xl:w-[255px]",type:"submit",children:"Save"})}):e.jsx("div",{onClick:x,className:"w-full flex text-zinc-500 text-base font-medium font-['Manrope'] tracking-wide ",children:e.jsxs("div",{className:`cursor-pointer hover:opacity-80 flex  gap-[12px] ${k}`,children:[e.jsx(v,{id:"icon-logout",size:24,stroke:"#54ADFF",fill:"transparent"}),"Log Out"]})})]})]})]})},ae=({onTogleLeavingModal:x})=>e.jsx("div",{className:`relative w-[280px] bg-white rounded-[20px] shadow pt-[20px] pb-[24px] px-[8px] md:w-[704px] md:px-[20px] xl:w-[395px] rounded-[20px] mx-auto
    `,children:e.jsx("div",{className:"mdOnly:flex flex-row-reverse justify-center items-center gap-[70px]",children:e.jsx(se,{onTogleLeavingModal:x})})}),le=({location:x})=>e.jsx(I,{to:"/add-pet",state:x,children:e.jsxs("div",{className:`transition duration-200 ease-in-out hover:opacity-80 cursor-pointer flex justify-center items-center flex-col w-20 h-20  bg-gradient-to-r from-lightBlue to-blue rounded-full shadow z-10 
group hover:from-blue hover:to-lightBlue md:hover:from-blue md:hover:to-blue
md:w-[129px] md:h-10 md:px-5 md:py-2 md:from-blue md:to-blue md:rounded-[40px] md:flex-row-reverse md:gap-[6px] `,children:[e.jsx("div",{className:"hidden md:w-6 h-6 relative md:flex items-center justify-center",children:e.jsx(v,{id:"icon-plus",size:18,stroke:"#FEF9F9"})}),e.jsx("div",{className:"w-6 h-6 relative items-center justify-center mb-1 md:hidden ",children:e.jsx(v,{id:"icon-plus",size:24,stroke:"#FEF9F9"})}),e.jsx("div",{className:"text-white text-xs font-semibold font-['Manrope'] md:text-[15px]",children:"Add pet"})]})}),ne=({onCloseModal:x})=>e.jsxs("div",{className:" text-center my-12 w-72 md:w-[608px]",children:[e.jsx("h3",{className:" text-neutral-900 text-2xl md:text-4xl font-medium font-['Manrope'] tracking-wide",children:"Congrats!"}),e.jsx("p",{className:" mt-6 mb-10 md:mt-14 md:mb-16 text-neutral-900 text-base md:text-2xl  font-medium font-['Manrope'] tracking-wide",children:"Youre registration is success"}),e.jsxs("button",{onClick:x,type:"button",className:"w-60 h-10 px-7 py-2 bg-blue hover:blue-gradient rounded-3xl justify-center items-center gap-3 inline-flex  text-white text-base font-bold font-['Manrope'] tracking-wide",children:["Go to profile",e.jsx("span",{children:e.jsx(v,{id:"icon-pawprint",size:"24px",stroke:"white",fill:"white"})})]})]}),ie="transition duration-200 ease-in-out cursor-pointer hover:opacity-80",re=({id:x,photo:s,name:g,birth:b,type:o,comments:a,handleTogleDeleteModal:n})=>{const h=new Date(b),j=W(h,"dd.MM.yyyy");return e.jsxs("div",{className:"relative w-[280px] bg-white rounded-[20px] shadow pt-[16px] pb-[24px] px-[20px] md:w-[703px] md:flex xl:w-[821px] md:gap-5",children:[e.jsx("div",{className:"w-60 rounded-[20px] justify-center flex smOnly:mb-[20px] ",children:e.jsx("img",{className:"w-full h-[240px] rounded-[40px] object-cover md:w-[128px] md:h-[128px] xl:w-[161px] xl:h-[161px]",src:s})}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{onClick:()=>{n(x,g)},className:"absolute top-[-4px] right-[0]",children:e.jsx(v,{id:"icon-trash",size:24,stroke:"#54ADFF",fill:"transparent",className:ie})}),e.jsxs("ul",{className:"flex flex-col gap-[12px]",children:[e.jsx("li",{children:e.jsxs("p",{className:"text-black text-sm font-normal font-['Manrope'] tracking-wide",children:[e.jsx("span",{className:"text-black text-sm font-bold font-['Manrope'] tracking-wide",children:"Name:"})," ",g]})}),e.jsx("li",{children:e.jsxs("p",{className:"text-black text-sm font-normal font-['Manrope'] tracking-wide",children:[e.jsx("span",{className:"text-black text-sm font-bold font-['Manrope'] tracking-wide",children:"Date of birth:"})," ",j]})}),e.jsx("li",{children:e.jsxs("p",{className:"text-black text-sm font-normal font-['Manrope'] tracking-wide",children:[e.jsx("span",{className:"text-black text-sm font-bold font-['Manrope'] tracking-wide",children:"Type:"}),o]})}),e.jsx("li",{children:e.jsxs("p",{className:"text-black text-sm font-normal font-['Manrope'] tracking-wide",children:[e.jsx("span",{className:"text-black text-sm font-bold font-['Manrope'] tracking-wide",children:"Comments:"})," ",a]})})]})]})]})},oe=({petsPerPage:x,maxPages:s,currentPage:g,paginate:b})=>{let o=[];const[a,n]=c.useState(g);for(let t=1;t<=s;t++)o.push(t);const j=(()=>{let t,l,u;a===1?(t=o.slice(0,2),u=o.slice(a+1,a+1),l=[o[s-1]]):a===s?(t=[o[0]],u=o.slice(a,a-3),l=o.slice(-2)):(t=[o[0]],u=o.slice(a-2,a+1),l=[o[s-1]]);let r;return a===1?r=[...t,...u,"...",...l]:a!==1&&a!==s?a<=4?r=[...t,...u,"...",...l]:a>=s-3?r=[...t,"...",...u,...l]:r=[...t,"...",...u,"…",...l]:a===s&&(r=[...t,"...",...u,...l]),r=r.filter((f,w,d)=>d.indexOf(f)===w),r})(),y=(t,l)=>{l.preventDefault(),n(t),b(t)},N=t=>{t.preventDefault();const l=a-1;l>=1&&(n(l),b(l))},m=t=>{t.preventDefault();const l=a+1;l<=s&&(n(l),b(l))};return e.jsx("div",{className:"w-full flex justify-center mt-5",children:e.jsxs("ul",{className:"flex gap-3 ",children:[e.jsx("li",{className:"w-[35px] h-[35px] relative",children:e.jsx("a",{href:"#",className:"flex justify-center items-center rounded-full w-[35px] h-[35px] border border-[#54adff] text-neutral-900 text-base font-normal leading-[15px]",onClick:t=>N(t),children:e.jsx(v,{id:"icon-arrow-left",size:14,stroke:a===1?"gray":"#54adff"})})}),o.length<5?o.map(t=>e.jsx("li",{className:"w-[35px] h-[35px] relative",children:e.jsx("a",{href:"#",className:`flex justify-center items-center rounded-full w-[35px] h-[35px] border border-[#54adff] text-neutral-900 text-base font-normal leading-[15px]" ${a===t?"bg-[#54adff] text-white":""}`,onClick:l=>y(t,l),children:t})},t)):j.map(t=>t==="..."||t==="…"?e.jsx("li",{className:"w-[35px] h-[35px] relative",children:e.jsx("div",{href:"#",className:`flex justify-center items-center rounded-full w-[35px] h-[35px] border border-[#54adff] text-neutral-900 text-base font-normal leading-[15px]" ${a===t?"bg-[#54adff] text-white":""}`,children:t})},t):e.jsx("li",{className:"w-[35px] h-[35px] relative",children:e.jsx("a",{href:"#",className:`flex justify-center items-center rounded-full w-[35px] h-[35px] border border-[#54adff] text-neutral-900 text-base font-normal leading-[15px]" ${a===t?"bg-[#54adff] text-white":""}`,onClick:l=>y(t,l),children:t})},t)),e.jsx("li",{className:"w-[35px] h-[35px] relative",children:e.jsx("a",{href:"#",className:" flex justify-center items-center rounded-full w-[35px] h-[35px] border border-[#54adff] text-neutral-900 text-base font-normal leading-[15px]",onClick:t=>m(t),children:e.jsx("div",{className:"rotate-180",children:e.jsx(v,{id:"icon-arrow-left",size:14,stroke:a===s?"gray":"#54adff"})})})})]})})},ce=()=>{const x=P(),{items:s,total:g,qty:b}=M(K),o=M(d=>d.pets.isLoading),[a,n]=c.useState(1),h=4,[j,y]=c.useState(0);c.useEffect(()=>{x(q({page:a,limit:h}))},[a,x,h]),c.useEffect(()=>{y(Math.ceil(g/h))},[g]),c.useEffect(()=>{s.length===0&&a!==1&&!o&&n(d=>d-1/2)},[s,a,o]);const N=d=>{n(d)},[m,t]=c.useState(!1),[l,u]=c.useState(null),[r,f]=c.useState(null),w=(d,$)=>{t(!m),u(d),f($)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:!o&&s?e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"flex flex-col gap-[20px]",children:s.length>0?s.map(d=>e.jsx("li",{className:"mx-auto",children:e.jsx(re,{photo:d.imageURL,name:d.name,birth:d.birthDate,type:d.type,comments:d.comments,id:d._id,handleTogleDeleteModal:w})},d._id)):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-black font-medium font-['Manrope'] tracking-wide",children:"You haven't added any pets yet"})})}),s.length!==g&&s.length!==0&&e.jsx(oe,{petsPerPage:h,maxPages:j,paginate:N,currentPage:a})]}):e.jsx("div",{className:"w-full flex justify-center py-7",children:e.jsx(O,{})})}),e.jsx(A,{isOpen:m,onCloseModal:w,children:e.jsx(Q,{title:"yuor pet",nameToDelete:r,id:l,onCloseModal:w})})]})},ue=()=>{const x=H(),{email:s}=M(L)||{},[g,b]=c.useState(!1),[o,a]=c.useState(!1),[n,h]=c.useState(!0);c.useEffect(()=>{const m=()=>{const t=window.scrollY||document.documentElement.scrollTop,l=window.innerHeight;document.documentElement.scrollHeight-(t+l)<=100?h(!1):h(!0)};return window.addEventListener("scroll",m),m(),()=>{window.removeEventListener("scroll",m)}},[]);const j=()=>{a(!o)};c.useEffect(()=>{if(!s)return;const m=sessionStorage.getItem(`hasUserSeenModal_${s}`);(x.state&&x.state.fromPage==="/YourPet/register"&&!m||m==="false")&&(b(!0),sessionStorage.setItem(`hasUserSeenModal_${s}`,"true"))},[x,s]);const y=()=>{b(!1)},N=M(Y);return e.jsxs("section",{className:"py-[20px] md:py-[60px] ",children:[e.jsxs("div",{className:"relative container mx-auto xl:flex gap-[32px]",children:[e.jsxs("div",{className:"mb-[42px]",children:[e.jsx("h2",{className:"text-black text-xl font-medium font-['Manrope'] tracking-wide mb-[18px] md:text-[28px] md:mb-[24px]",children:"My information:"}),N&&e.jsx(ae,{onTogleLeavingModal:j})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("h2",{className:"text-black text-xl font-medium font-['Manrope'] tracking-wide mb-[18px] md:text-[28px] md:mb-[24px]",children:"My pets:"}),e.jsx("div",{className:`z-10 fixed right-[20px] ${n?"bottom-[20px] ":"bottom-[60px] "} md:absolute md:top-[-10px] md:right-0 md:bottom-full`,children:e.jsx(le,{location:x})}),N&&e.jsx(ce,{})]})]}),e.jsx(A,{isOpen:g,onCloseModal:y,children:e.jsx(ne,{onCloseModal:y})}),e.jsx(A,{isOpen:o,onCloseModal:j,children:e.jsx(_,{onCloseModal:j})})]})};export{ue as default};
