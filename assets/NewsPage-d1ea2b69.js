import{j as e,L as S,r as o,l as h,C,O as L}from"./index-dc1813bb.js";import{f as P}from"./index-986389ff.js";import{S as T,P as k}from"./Pagination-403c21ee.js";import{T as E}from"./Title-a41b8230.js";const f=({text:s,length:a})=>{const[r,n]=o.useState(!1),c=()=>n(!0),m=()=>n(!1);return e.jsx("span",{onMouseEnter:c,onMouseLeave:m,children:s.length>a?e.jsx("span",{style:{cursor:"zoom-in"},children:r?s:s.slice(0,a)+"..."}):s})},Q=({date:s,imgUrl:a,text:r,title:n,url:c})=>e.jsxs("div",{className:"   mx-auto md:mx-0 md:w-[336px]  xl:w-[395px]",children:[e.jsx("div",{className:"w-full h-2 blue-gradient-full rounded-[40px]"}),e.jsxs("div",{className:"mx-auto mt-[12px] flex flex-col justify-between bg-white rounded-[20px] md:h-[556px] p-[16px] md:p-[12px]",children:[e.jsxs("div",{className:" flex flex-col gap-[16px]",children:[e.jsx("div",{className:"mx-[-16px] mt-[-16px] md:mx-[-12px] md:mt-[-12px]",children:e.jsx("img",{src:a,alt:"newImage",className:"w-full  bg-black bg-opacity-20 rounded-[20px] h-[252px] "})}),e.jsx("h2",{className:"text-2xl font-bold font-manrope ",children:e.jsx(f,{text:n,length:"40"})}),e.jsx("p",{className:"text-base font-normal font-manrope",children:e.jsx(f,{text:r,length:"200"})})]}),e.jsxs("div",{className:"flex justify-between mt-[24px] md:mt-[40px]",children:[e.jsx("p",{className:" text-grey text-base font-normal font-manrope",children:P(Date.parse(s),"dd/MM/yyyy")}),e.jsx(S,{target:"_blank",to:c,className:"text-blue text-base font-medium font-manrope hover:text-black",children:"Read more"})]})]})]}),I=async()=>(await h.get("/api/news/")).data,q=async(s,a=1)=>(await h.get(`/api/news/?q=${s}&page=${a}`)).data,z=()=>{const[s,a]=o.useState([]),[r,n]=o.useState(0),[c,m]=o.useState(0),[g,j]=o.useState(""),[w,p]=o.useState(!1),d=6;o.useEffect(()=>{i()},[]);const i=async()=>{try{p(!0);const t=await I();a(t.data),m(x=>(t.total!==x&&n(Math.ceil(t.total/d)),p(!1),t.total))}catch(t){console.log(t)}},u=async(t,x=1)=>{try{const l=await q(t,x);a(l.data),m(()=>(n(Math.ceil(l.total/d)),l.total)),j(t)}catch(l){console.log(l.message)}},y=t=>{u(g,t.selected+1)},N=()=>{i()};return e.jsxs(C,{className:"pb-[117px] md:pb-[126px]",children:[e.jsx(E,{className:"mt-[40px] md:mt-[80px]",children:"News"}),e.jsx(T,{getQuery:u,refreshClear:N,className:"mt-[24px] md:mt-[40px]"}),e.jsx(L,{}),e.jsx("ul",{className:"mt-[24px] md:mt-[40px] xl:mt-[60px] flex flex-wrap gap-[24px] md:gap-x-[32px] md:gap-y-[24px] xl:gap-x-[31px] xl:gap-y-[24px]",children:s.map(({_id:t,date:x,imgUrl:l,text:b,title:v,url:M})=>e.jsx("li",{children:e.jsx(Q,{date:x,imgUrl:l,text:b,title:v,url:M})},t))}),e.jsx(k,{handleClickPage:y,totalPages:r}),s.length===0&&!w&&e.jsx("div",{className:"mx-auto mt-10 w-fit text-xl",children:"No news found for this search... Try more!"})]})};export{z as default};
