import{u as k,q as I,c as A,r,s as q,j as e,S as j,t as Y,B as O,v as Z,g as _,L as G,w as H}from"./index-da8fb547.js";import{c as J,a as F,u as K}from"./index.esm-b519bb2c.js";import{e as Q,g as W}from"./petsSelectors-a51fc366.js";import{M as $,D as X}from"./DeleteModal-946c14e6.js";import{f as ee}from"./index-1efd9a6a.js";const te=/^[A-Za-z]+$/,se=/^\+[0-9]{12}$/,ae=J().shape({city:F().max(60),name:F().min(2,"Too Short").max(16,"Too Long, max 16").matches(te,"Name must contain only characters").required("Name is Required"),email:F().email("Enter a valid Email").required("Email is Required"),phone:F().matches(se,"Format: +38123456789")}),S="pl-4 absolute -bottom-5 text-rose-500 text-xs font-normal top-6 left-[60px] xl:left-[85px]",v="transition duration-200 ease-in-out cursor-pointer hover:opacity-80",w="text-neutral-900 text-sm font-semibold font-['Manrope'] tracking-wide mdOnly:text-[16px] ",N="text-neutral-900 text-xs font-normal font-['Manrope'] tracking-wide w-[190px] h-6 px-3 py-1 rounded-[20px] border border-blue-400 justify-start items-center gap-[191px] inline-flex md:w-[255px]  xl:w-[255px]",ne=({onTogleLeavingModal:o,handleEditForm:i,editReset:p})=>{const t=k(I),f=k(n=>n.auth.isRequestActive),l=A(),[h,u]=r.useState(null),[c,g]=r.useState(!1),[a,d]=r.useState(null),[C,y]=r.useState(!1),[D,M]=r.useState(!1);r.useEffect(()=>{c||d("")},[c]),r.useEffect(()=>{p&&(g(!1),P())},[p]);const E=n=>typeof n=="string"&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/.test(n)?n:Date.now(),x=K({initialValues:{name:t.name||"",email:t.email||"",birthday:E(t.birthday),phone:t.phone||"",city:t.city||""},validateOnChange:!1,validateOnBlur:!0,validationSchema:ae,onSubmit:({name:n,email:m,birthday:U,phone:T,city:V})=>{const L={name:n,email:m,birthday:U,phone:T,city:V};a&&D&&(L.avatar=h);const B=z(L);l(q(B)),y(!1),g(!1)}}),s=x.errors,b=x.values,z=n=>{const m=new FormData;return m.append("avatar",n.avatar),m.append("name",n.name),m.append("email",n.email),m.append("birthday",n.birthday),m.append("phone",n.phone),m.append("city",n.city),m};function R(n){const m=new FileReader;if(m.onloadend=function(){d(m.result)},n)m.readAsDataURL(n),y(!0);else return}const P=()=>{g(!1),y(!1),M(!1),x.setFieldValue("name",t.name),x.setFieldValue("email",t.email),x.setFieldValue("birthday",t.birthday),x.setFieldValue("phone",t.phone),x.setFieldValue("city",t.city)};return e.jsxs("form",{noValidate:!0,autoComplete:"off",className:"flex flex-col flex-wrap-reverse",onSubmit:x.handleSubmit,children:[e.jsx("div",{className:`absolute top-[14px] right-[14px] ${v}`,children:c?e.jsx("div",{onClick:P,children:e.jsx(j,{id:"icon-cross",size:24,stroke:"#54ADFF",fill:"transparent",className:v})}):e.jsx("div",{onClick:()=>{g(!0),i()},children:e.jsx(j,{id:"icon-edit",size:24,fill:"#54ADFF",className:v})})}),e.jsxs("div",{className:"mdOnly:flex flex-row-reverse gap-[71px]",children:[e.jsxs("div",{className:"flex justify-center",children:[e.jsxs("label",{htmlFor:"avatar",className:"flex justify-center flex-col gap-[5px]",children:[e.jsx("div",{className:"flex justify-center mb-[14px]  w-[182px] h-[182px] rounded-[40px] bg-slate-100 items-center overflow-hidden",children:f?e.jsx("div",{className:"text-center",children:e.jsx($,{})}):e.jsx("img",{className:" object-cover  rounded-[40px] w-[182px] h-[182px]",src:a||t.avatarURL,alt:"User Avatar"})}),C?e.jsxs("div",{className:"flex justify-center mb-[14px] gap-2 h-6",children:[e.jsx("div",{onClick:n=>{n.preventDefault(),y(!1),M(!0)},children:e.jsx(j,{id:"icon-check",size:24,stroke:"#54ADFF",fill:"transparent",className:v})}),"Confirm",e.jsx("div",{onClick:n=>{n.preventDefault(),y(!1),d(null)},children:e.jsx(j,{id:"icon-cross",size:24,stroke:"#54ADFF",fill:"transparent",className:v})})]}):e.jsxs("div",{className:c?`flex flex-row justify-center gap-[5px] mb-[14px] ${v} h-6`:"flex flex-row justify-center gap-[5px] mb-[14px] opacity-0 h-6",children:[e.jsx(j,{id:"icon-camera",size:24,stroke:"#54ADFF",fill:"transparent",className:v}),"Edit photo"]})]}),e.jsx("div",{children:e.jsx("input",{className:"hidden",type:c&&!C?"file":"",id:"avatar",name:"avatar",accept:"image/jpeg, image/png",onChange:n=>{const m=n.target.files[0];R(m),u(m)}})})]}),e.jsxs("div",{className:"flex flex-col gap-[20px]",children:[e.jsxs("div",{className:"flex justify-between relative",children:[e.jsx("label",{className:w,htmlFor:"name",children:"Name:"}),e.jsx("input",{className:`${N} ${s.name&&"border-rose-400"}`,type:"text",id:"name",name:"name",value:b.name,onChange:x.handleChange,readOnly:!c}),s.name&&e.jsx("p",{className:S,children:s.name})]}),e.jsxs("div",{className:"flex justify-between w-full relative",children:[e.jsx("label",{className:w,htmlFor:"email",children:"Email:"}),e.jsx("input",{className:`${N} ${s.email&&"border-rose-400"}`,type:"text",id:"email",name:"email",value:b.email,onChange:x.handleChange,readOnly:!c}),s.email&&e.jsx("p",{className:S,children:s.email})]}),e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("label",{className:w,htmlFor:"birthday",children:"Birthday:"}),e.jsx("div",{children:e.jsx(Q,{selected:new Date(b.birthday),onChange:n=>{x.setFieldValue("birthday",n)},readOnly:!c,dateFormat:"dd-MM-yyyy",className:N})})]}),e.jsxs("div",{className:"flex justify-between w-full relative",children:[e.jsx("label",{className:w,htmlFor:"phone",children:"Phone:"}),e.jsx("input",{className:`${N} ${s.phone&&"border-rose-400"}`,type:"tel",id:"phone",name:"phone",placeholder:"+38123456789",value:b.phone,onChange:x.handleChange,readOnly:!c}),s.phone&&e.jsx("p",{className:S,children:s.phone})]}),e.jsxs("div",{className:"flex justify-between relative",children:[e.jsx("label",{className:w,htmlFor:"city",children:"City:"}),e.jsx("input",{className:`${N} ${s.city&&"border-rose-400"}`,type:"text",id:"city",name:"city",value:b.city,onChange:x.handleChange,readOnly:!c}),s.city&&e.jsx("p",{className:S,children:s.city})]}),c?e.jsx("div",{className:"w-full h-6 flex justify-end",children:e.jsx("button",{className:"flex justify-center w-[248px] text-stone-50 text-sm font-bold font-['Manrope'] tracking-wide h-[31px] px-[107px] py-1.5 bg-blue rounded-[40px] md:justify-center items-center gap-2 inline-flex md:w-[255px]  xl:w-[255px]",type:"submit",children:"Submit"})}):e.jsx("div",{onClick:o,className:"w-full flex text-zinc-500 text-base font-medium font-['Manrope'] tracking-wide ",children:e.jsxs("div",{className:`cursor-pointer hover:opacity-80 flex  gap-[12px] ${v}`,children:[e.jsx(j,{id:"icon-logout",size:24,stroke:"#54ADFF",fill:"transparent"}),"Log Out"]})})]})]})]})},le=({onTogleLeavingModal:o})=>{const i=r.useRef(null),[p,t]=r.useState(!1),[f,l]=r.useState(!1),h=()=>{l(!0)};return r.useEffect(()=>{const u=c=>{f&&i.current&&!i.current.contains(c.target)&&(t(!0),l(!1))};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u),t(!1)}},[f]),e.jsx("div",{ref:i,className:`relative w-[280px] bg-white rounded-[20px] shadow pt-[20px] pb-[24px] px-[8px] md:w-[704px] md:px-[20px] xl:w-[395px] rounded-[20px] mx-auto
    `,children:e.jsx("div",{className:"mdOnly:flex flex-row-reverse justify-center items-center gap-[70px]",children:e.jsx(ne,{onTogleLeavingModal:o,handleEditForm:h,editReset:p})})})},re=()=>e.jsxs("div",{className:`transition duration-200 ease-in-out hover:opacity-95 cursor-pointer flex justify-center items-center flex-col w-20 h-20  bg-gradient-to-r from-lightBlue to-blue rounded-full shadow z-10 
group hover:from-blue hover:to-lightBlue md:hover:from-blue md:hover:to-blue
md:w-[129px] md:h-10 md:px-5 md:py-2 md:from-blue md:to-blue md:rounded-[40px] md:flex-row-reverse md:gap-[6px] `,children:[e.jsx("div",{className:"hidden md:w-6 h-6 relative md:flex items-center justify-center",children:e.jsx(j,{id:"icon-plus",size:18,stroke:"#FEF9F9"})}),e.jsx("div",{className:"w-6 h-6 relative items-center justify-center mb-1 md:hidden ",children:e.jsx(j,{id:"icon-plus",size:24,stroke:"#FEF9F9"})}),e.jsx("div",{className:"text-white text-xs font-semibold font-['Manrope'] md:text-[15px]",children:"Add pet"})]}),ie=({onCloseModal:o})=>e.jsxs("div",{className:" text-center my-12 w-72 md:w-[608px]",children:[e.jsx("h3",{className:" text-neutral-900 text-2xl md:text-4xl font-medium font-['Manrope'] tracking-wide",children:"Congrats!"}),e.jsx("p",{className:" mt-6 mb-10 md:mt-14 md:mb-16 text-neutral-900 text-base md:text-2xl  font-medium font-['Manrope'] tracking-wide",children:"Youre registration is success"}),e.jsxs("button",{onClick:o,type:"button",className:"w-60 h-10 px-7 py-2 bg-blue hover:blue-gradient rounded-3xl justify-center items-center gap-3 inline-flex  text-white text-base font-bold font-['Manrope'] tracking-wide",children:["Go to profile",e.jsx("span",{children:e.jsx(j,{id:"icon-pawprint",size:"24px",stroke:"white",fill:"white"})})]})]}),oe="transition duration-200 ease-in-out cursor-pointer hover:opacity-80",ce=({id:o,photo:i,name:p,birth:t,type:f,comments:l,handleTogleDeleteModal:h})=>{const u=new Date(t),c=ee(u,"dd.MM.yyyy");return e.jsxs("div",{className:"relative w-[280px] bg-white rounded-[20px] shadow pt-[16px] pb-[24px] px-[20px] md:w-[703px] md:flex xl:w-[821px] md:gap-5",children:[e.jsx("div",{className:"w-60 rounded-[20px] justify-center flex smOnly:mb-[20px] ",children:e.jsx("img",{className:"w-full h-[240px] rounded-[40px] object-cover md:w-[128px] md:h-[128px] xl:w-[161px] xl:h-[161px]",src:i})}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{onClick:()=>{h(o,p)},className:"absolute top-[-4px] right-[0]",children:e.jsx(j,{id:"icon-trash",size:24,stroke:"#54ADFF",fill:"transparent",className:oe})}),e.jsxs("ul",{className:"flex flex-col gap-[12px]",children:[e.jsx("li",{children:e.jsxs("p",{className:"text-black text-sm font-normal font-['Manrope'] tracking-wide",children:[e.jsx("span",{className:"text-black text-sm font-bold font-['Manrope'] tracking-wide",children:"Name:"})," ",p]})}),e.jsx("li",{children:e.jsxs("p",{className:"text-black text-sm font-normal font-['Manrope'] tracking-wide",children:[e.jsx("span",{className:"text-black text-sm font-bold font-['Manrope'] tracking-wide",children:"Date of birth:"})," ",c]})}),e.jsx("li",{children:e.jsxs("p",{className:"text-black text-sm font-normal font-['Manrope'] tracking-wide",children:[e.jsx("span",{className:"text-black text-sm font-bold font-['Manrope'] tracking-wide",children:"Type:"})," ",f]})}),e.jsx("li",{children:e.jsxs("p",{className:"text-black text-sm font-normal font-['Manrope'] tracking-wide",children:[e.jsx("span",{className:"text-black text-sm font-bold font-['Manrope'] tracking-wide",children:"Comments:"})," ",l]})})]})]})]})},de=({petsPerPage:o,totalPets:i,currentPage:p,paginate:t})=>{const f=[],[l,h]=r.useState(p||1);for(let a=1;a<=Math.ceil(i/o);a++)f.push(a);const u=(a,d)=>{d.preventDefault(),h(a),t(a)},c=a=>{a.preventDefault();const d=l-1;d>=1&&(h(d),t(d))},g=a=>{a.preventDefault();const d=l+1;d<=Math.ceil(i/o)&&(h(d),t(d))};return e.jsx("div",{className:"w-full flex justify-center mt-5",children:e.jsxs("ul",{className:"flex gap-3 ",children:[e.jsx("li",{className:"w-[35px] h-[35px] relative",children:e.jsx("a",{href:"#",className:"flex justify-center items-center rounded-full w-[35px] h-[35px] border border-[#54adff] text-neutral-900 text-base font-normal leading-[15px]",onClick:a=>c(a),children:e.jsx(j,{id:"icon-arrow-left",size:14,stroke:l===1?"gray":"#54adff"})})}),f.map(a=>e.jsx("li",{className:"w-[35px] h-[35px] relative",children:e.jsx("a",{href:"#",className:`flex justify-center items-center rounded-full w-[35px] h-[35px] border border-[#54adff] text-neutral-900 text-base font-normal leading-[15px]" ${l===a?"bg-[#54adff] text-white":""}`,onClick:d=>u(a,d),children:a})},a)),e.jsx("li",{className:"w-[35px] h-[35px] relative",children:e.jsx("a",{href:"#",className:" flex justify-center items-center rounded-full w-[35px] h-[35px] border border-[#54adff] text-neutral-900 text-base font-normal leading-[15px]",onClick:a=>g(a),children:e.jsx("div",{className:"rotate-180",children:e.jsx(j,{id:"icon-arrow-left",size:14,stroke:l===Math.ceil(i/o)?"gray":"#54adff"})})})})]})})},xe=()=>{const o=A(),i=k(W),p=k(s=>s.pets.isLoading),[t,f]=r.useState(1),[l,h]=r.useState(4),u=t*l,c=u-l,g=i.slice(c,u),a=s=>f(s),[d,C]=r.useState(!1),[y,D]=r.useState(null),[M,E]=r.useState(null),x=(s,b)=>{C(!d),D(s),E(b)};return r.useEffect(()=>{o(Y())},[o]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[p?e.jsx("div",{className:"w-full flex justify-center py-7",children:e.jsx($,{})}):e.jsx("ul",{className:`flex flex-col gap-[20px] ${i.length>3&&""}`,children:i.length>0?g.map(s=>e.jsx("li",{className:"mx-auto",children:e.jsx(ce,{photo:s.imageURL,name:s.name,birth:s.birthDate,type:s.type,comments:s.comments,id:s._id,handleTogleDeleteModal:x})},s._id)):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-black font-medium font-['Manrope'] tracking-wide",children:"You haven't added any pets yet"})})}),i.length>0&&l!==i.length&&e.jsx(de,{petsPerPage:l,totalPets:i.length,paginate:a})]}),e.jsx(O,{isOpen:d,onCloseModal:x,children:e.jsx(X,{title:"yuor pet",nameToDelete:M,id:y,onCloseModal:x,currentPage:t})})]})},je=()=>{const o=Z(),[i,p]=r.useState(!1),[t,f]=r.useState(!1),l=()=>{f(!t)};r.useEffect(()=>{o.state&&o.state.fromPage==="/YourPet/register"&&p(!0)},[o]);const h=()=>{p(!1)},u=k(_);return e.jsxs("section",{className:"py-[20px] md:py-[60px] ",children:[e.jsxs("div",{className:"relative container mx-auto xl:flex gap-[32px]",children:[e.jsxs("div",{className:"mb-[42px]",children:[e.jsx("h2",{className:"text-black text-xl font-medium font-['Manrope'] tracking-wide mb-[18px] md:text-[28px]",children:"My information:"}),u&&e.jsx(le,{onTogleLeavingModal:l})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("h2",{className:"text-black text-xl font-medium font-['Manrope'] tracking-wide mb-[18px] md:text-[28px]",children:"My pets:"}),e.jsx(G,{to:"/add-pet",state:o,className:"z-10 fixed right-[20px] bottom-[20px] md:absolute md:top-0 md:right-0 md:bottom-full",children:e.jsx(re,{})}),e.jsx(xe,{})]})]}),e.jsx(O,{isOpen:i,onCloseModal:h,children:e.jsx(ie,{onCloseModal:h})}),e.jsx(O,{isOpen:t,onCloseModal:l,children:e.jsx(H,{onCloseModal:l})})]})};export{je as default};
