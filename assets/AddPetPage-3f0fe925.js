import{j as e,r as m,S as g,u as C,a as oe,c as ne,v as le,z as re,A as ie}from"./index-c1b0856a.js";import{E as X,d as p,c as A,a as d,f as ce,g as xe,F as de,b as me}from"./index.esm-a8c27cbe.js";import{e as pe,a as ue}from"./petsSelectors-92f662e3.js";import{g as he}from"./noticesSelectors-0851ff6e.js";import"./index-37cf118d.js";const w=({inputName:t,styles:o="absolute -bottom-[20px] text-red text-xs font-normal"})=>e.jsx(X,{name:t,children:a=>e.jsx("p",{className:o,children:a})}),fe="px-[16px] py-[8px] rounded-[40px] justify-center items-center w-fit  text-sm font-medium font-manrope tracking-wide cursor-pointer",ge="bg-lightBlue text-blue",be="bg-blue text-background",y=({category:t,name:o,value:a,children:l})=>e.jsxs("label",{className:`${fe} ${t===a?be:ge}`,children:[e.jsx(p,{name:o,type:"radio",value:a,className:"w-0 h-0 invisible"}),l]}),je=({category:t})=>e.jsxs("div",{className:"relative flex flex-col mb-[45px] gap-[12px] md:mb-[87px]",children:[e.jsx(y,{category:t,name:"category",value:"own",children:"your pet"}),e.jsx(y,{category:t,name:"category",value:"sell",children:"sell"}),e.jsx(y,{category:t,name:"category",value:"lost",children:"lost"}),e.jsx(y,{category:t,name:"category",value:"found",children:"found"}),e.jsx(y,{category:t,name:"category",value:"good-hands",children:"in good hands"}),e.jsx(w,{inputName:"category"})]}),Z=t=>{const o=t.getDate().toString().padStart(2,"0"),a=(t.getMonth()+1).toString().padStart(2,"0"),l=t.getFullYear().toString();return[o,a,l].join("-")},ye="relative flex flex-col text-black text-sm font-medium font-manrope md:text-xl md:leading-relaxed",L="w-[100%] h-[40px] px-[16px] py-[8px] rounded-[40px] border border-blue justify-start items-center md:h-[48px] md:py-[12px]",q="border-red",we="absolute -bottom-[18px] ml-4 text-red text-xs font-normal",N=({name:t,type:o="text",value:a,placeholder:l,callback:i,error:r,children:x})=>{const[b,u]=m.useState(new Date);return e.jsxs("label",{className:ye,children:[x,o!=="date"?e.jsx(p,{name:t,type:o,value:a,placeholder:l,className:`${L} ${r?q:""}`}):e.jsx(pe,{name:t,selected:b,onChange:h=>{u(h),i("birth",Z(h))},dateFormat:"dd-MM-yyyy",className:`${L} ${r?q:""}`}),e.jsx(w,{inputName:t,styles:we})]})},ve=({errors:t,setFieldValue:o,category:a,title:l,name:i,birth:r,type:x})=>e.jsxs("div",{className:"flex flex-col mb-[24px] gap-[20px] md:gap-[24px] md:mb-[40px]",children:[a!=="own"&&e.jsx(N,{name:"title",value:l,placeholder:"Title of add",error:t.title,children:"Title of add"}),a!=="found"&&e.jsxs(e.Fragment,{children:[e.jsx(N,{name:"name",value:i,placeholder:"Type name pet",error:t.name,children:"Pet's name"}),e.jsx(N,{name:"birth",value:r,type:"date",callback:o,error:t.birth,children:"Date of birth"})]}),e.jsx(N,{name:"type",value:x,placeholder:"Type of pet",error:t.type,children:"Type"})]}),M="flex flex-row align-center  px-[16px] py-[8px] rounded-[40px] justify-center items-center w-fit  text-sm text-base font-normal font-manrope tracking-wide leading-normal cursor-pointer",R="text-grey",Y="bg-blue text-background",$="mb-[4px]",S="relative flex flex-col text-black text-sm font-medium font-manrope md:text-xl md:leading-relaxed",T="w-[100%] h-[40px] px-[16px] py-[8px] rounded-[40px] border border-blue justify-start items-center md:h-[48px] md:py-[12px]",F="border-red",k="absolute -bottom-[18px] ml-4 text-red text-xs font-normal",Ne=({errors:t,category:o,sex:a,price:l,location:i,petImage:r,setPhoto:x,comments:b})=>{const[u,h]=m.useState(r?URL.createObjectURL(r):""),v=s=>a===""&&s==="female"?"#F43F5E":a===""&&s==="male"?"#54ADFF":a===s?"#FFF":"#888888",f=u!=="";return e.jsxs("div",{className:"flex flex-col mb-[24px] gap-[20px] md:flex-row md:mx-[40px] md:gap-[45px] xl:gap-[80px]",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"relative flex flex-col gap-[16px] mb-[16px]",children:[e.jsx("p",{className:`${S} -mb-[8px] items-center`,children:"The sex"}),e.jsxs("div",{className:"flex flex-row mx-auto gap-[16px]",children:[e.jsxs("label",{className:`${M} ${a==="female"?Y:R}`,children:[e.jsx(p,{name:"sex",type:"radio",value:"female",className:"w-0 h-0 invisible"}),e.jsx(g,{id:"icon-female",className:"flex items-center w-fit",fill:"transparent",stroke:v("female")}),"Female"]}),e.jsxs("label",{className:`${M} ${a==="male"?Y:R}`,children:[e.jsx(p,{name:"sex",type:"radio",value:"male",className:"w-0 h-0 invisible"}),e.jsx(g,{id:"icon-male",className:"flex items-center w-fit",fill:"transparent",stroke:v("male")}),"Male"]})]}),e.jsx(X,{name:"sex",children:s=>e.jsx("div",{className:"absolute -bottom-[10px] flex justify-center w-[100%] text-red text-xs font-normal",children:e.jsx("p",{className:"w-fit",children:s})})})]}),e.jsxs("div",{className:"relative flex flex-col items-center gap-[13px]",children:[e.jsxs("label",{className:`flex flex-col gap-[8px] items-center mx-auto ${f?"pointer-events-none":"cursor-pointer"}`,children:[!f&&e.jsx("p",{className:"text-black text-sm font-medium font-manrope",children:"Add pet's photo:"}),e.jsxs("div",{className:"relative w-[112px] h-[112px] bg-lightBlue bg-cover bg rounded-[20px] md:w-[182px] md:h-[182px]",children:[f?e.jsx("img",{className:"w-[100%] h-[100%] rounded-[20px] object-cover",src:u,alt:"Pet photo"}):e.jsx(g,{id:"icon-add-cross",className:"absolute top-[50%] left-[50%] -translate-x-[50%] -translate-y-[50%] w-[24px] ",fill:"#54ADFF"}),e.jsx("input",{id:"petImage",name:"petImage",type:"file",onChange:s=>{const n=s.target.files[0],c=URL.createObjectURL(n);x(n),h(c)},className:"w-0 h-0 invisible"})]})]}),f&&e.jsxs("label",{htmlFor:"petImage",className:"flex flex-row items-center cursor-pointer",children:[e.jsx(g,{id:"icon-camera",className:"flex items-center w-fit mr-[8px]",fill:"transparent",stroke:"#54ADFF"}),e.jsx("p",{className:"text-black text-xs font-normal font-manrope leading-snug tracking-wide",children:"Edit photo"})]}),t.petImage&&e.jsx("p",{className:"absolute -bottom-[18px] break-keep text-red text-xs font-normal",children:t.petImage})]})]}),e.jsxs("div",{className:"flex flex-col gap-[20px] md:gap-[24px] md:min-w-[395px]",children:[o!=="own"&&e.jsxs("label",{className:S,children:[e.jsx("p",{className:$,children:"Location"}),e.jsx(p,{name:"location",type:"text",value:i,placeholder:"Add some location",className:`${T} ${t.location&&t.location!==""?F:""}`}),e.jsx(w,{inputName:"location",styles:k})]}),o==="sell"&&e.jsxs("label",{className:S,children:[e.jsx("p",{className:$,children:"Price"}),e.jsx(p,{name:"price",type:"number",value:l,placeholder:"Add some price",className:`${T} ${t.price&&t.price!==""?F:""}`}),e.jsx(w,{inputName:"price",styles:k})]}),e.jsxs("label",{className:`${S} h-[100%]`,children:[e.jsx("p",{className:$,children:"Comments"}),e.jsx(p,{as:"textarea",name:"comments",value:b,placeholder:"Type about your friend",className:`flex w-[100%] h-[100%] px-[16px] py-[8px] border border-blue rounded-[20px] resize-none ${t.comments&&t.comments!==""?F:""}`}),e.jsx(w,{inputName:"comments",styles:k})]})]})]})},Se=/^(0[1-9]|[1-2][0-9]|3[0-1])-(0[1-9]|1[0-2])-\d{4}$/,$e=3,Fe=A({category:d().oneOf(["own","sell","lost","found","good-hands"],"Invalid category").required("You have to choose the category")}),ke=A({title:d().max(20).when("category",{is:"own",then:t=>t.notRequired(),otherwise:t=>t.required("You have to write the title")}),name:d().min(2).max(16).when("category",{is:"found",then:t=>t.notRequired(),otherwise:t=>t.required("You have to write the pet's name")}),birth:d().matches(Se,{message:"Date must have DD-MM-YYYY format"}).when("category",{is:"found",then:t=>t.notRequired(),otherwise:t=>t.required("You have to write the pet's birthdate")}),type:d().min(2).max(16).required("You have to write the pet's type")}),Be=A({sex:d().oneOf(["male","female"],"Invalid sex").required("You have to choose the sex"),petImage:ce().required("You need to add the pet's photo").test("fileSize","File too large",t=>t&&t.size<=$e*1048576),price:xe().min(1,"Price can't be lower than 0 or equal to it").when("category",{is:"sell",then:t=>t.required("You have to write the price"),otherwise:t=>t.notRequired()}),location:d().when("category",{is:"own",then:t=>t.notRequired(),otherwise:t=>t.required("You have to write location")}),comments:d().max(120)}),E="px-[16px] py-[8px] rounded-[40px] flex justify-center items-center gap-[12px] w-[100%] text-sm font-medium font-manrope tracking-wide",Pe=()=>{const{step:t,setStep:o,category:a,setCategory:l}=m.useContext(D),i=C(ue),r=C(he),x=oe(),b=ne(),u=le(),h=m.useRef(u.state??"/"),v=()=>{t>1?o(s=>s-1):x(h.current),t===2&&l("own")},f=s=>{const n=new FormData;return n.append("category",s.category),n.append("type",s.type),n.append("sex",s.sex),n.append("image",s.petImage),n.append("comments",s.comments),s.category!=="found"&&(n.append("name",s.name),n.append("birthDate",s.birth)),s.category!=="own"&&(n.append("title",s.title),n.append("location",s.location)),s.category==="sell"&&n.append("price",s.price),n};return e.jsx(de,{initialValues:{category:a,title:"",name:"",birth:Z(new Date),type:"",sex:"",petImage:null,price:"",location:"",comments:""},validateOnChange:!1,validateOnBlur:!1,validationSchema:t===1&&Fe||t===2&&ke||t===3&&Be,onSubmit:(s,n)=>{if(t===1&&l(s.category),t===3){const c=f(s);b(a==="own"?re(c):ie(c)).then(j=>{j.error||(n.resetForm(),x(a==="own"?"/user":"/notices/sell"))})}t<3&&o(c=>c+1)},children:({handleSubmit:s,setFieldValue:n,errors:c,values:{category:j,title:G,name:H,birth:J,type:K,sex:Q,petImage:W,price:ee,location:te,comments:se}})=>e.jsxs(me,{onSubmit:s,encType:"multipart/form-data",children:[t===1&&e.jsx(je,{category:j}),t===2&&e.jsx(ve,{setFieldValue:n,errors:c,category:j,title:G,name:H,birth:J,type:K}),t===3&&e.jsx(Ne,{setPhoto:ae=>{n("petImage",ae)},category:j,errors:c,sex:Q,price:ee,location:te,petImage:W,comments:se}),e.jsxs("div",{className:"flex flex-col justify-center px-[4px] w-[100%] gap-[4px] md:flex-row-reverse md",children:[e.jsxs("button",{type:"button",className:`${E} border ${i||r?"bg-lightBlue border-lightBlue":"bg-blue border-blue hover:blue-gradient"}  text-background md:px-[28px] md:w-[248px] `,disabled:i||r,onClick:s,children:[t===3?"Done":"Next",e.jsx(g,{id:"icon-pawprint",className:"w-fit",fill:"white"})]}),e.jsxs("button",{type:"button",className:`${E} text-blue hover:border hover:border-blue md:w-[116px]`,disabled:i||r,onClick:v,children:[e.jsx(g,{id:"icon-arrow-left",className:"w-fit",stroke:"#54ADFF"}),t===1?"Сancel":"Back"]})]})]})})},O={own:"Add pet",sell:"Add pet for sell",lost:"Add lost pet",found:"Add found pet"},Ie=({category:t,step:o})=>e.jsx("div",{className:`ml-[12px] mb-[24px] text-neutral-900 text-xl font-medium font-manrope ${o===3&&"md:text-center"} md:text-[28px]`,children:O[t]||O.own}),B="flex flex-col justify-center text-[10px] font-medium font-manrope md:text-base  md:leading-relaxed",_="text-grey mb-[12px]",P="text-blue mb-[12px]",z="text-green mb-[12px]",Ae="w-[80px] h-[8px] rounded-lg md:w-[120px]",U=`${Ae} bg-lightBlue`,I="w-[80px] h-[8px] bg-blue rounded-lg md:w-[120px]",V="w-[80px] h-[8px] bg-green rounded-lg md:w-[120px]",De=()=>{const{step:t}=m.useContext(D);return e.jsxs("div",{className:"w-[100%] flex flex-row justify-center mb-[16px] gap-[12px] md:gap-[16px] md:mb-[24px]",children:[e.jsxs("div",{className:`${B}`,children:[e.jsx("p",{className:`
          ${t===1?P:z}`,children:"Choose option"}),e.jsx("div",{className:`${t===1?I:V}`})]}),e.jsxs("div",{className:`${B}`,children:[e.jsx("p",{className:`
          ${t===1?_:""} 
          ${t===2?P:""} 
          ${t===3?z:""}`,children:"Personal details"}),e.jsx("div",{className:`
          ${t===1?U:""} 
          ${t===2?I:""} 
          ${t===3?V:""}`})]}),e.jsxs("div",{className:`${B}`,children:[e.jsx("p",{className:`${t===3?P:_}`,children:"More info"}),e.jsx("div",{className:`${t===3?I:U}`})]})]})},Ce=({children:t})=>e.jsx("div",{className:"w-[100vw] h-[100vh] pt-[68px] bg-[url('src/images/mobile_bg.png')] xl:bg-[url('src/images/desktop_bg.png')] md:bg-[url('src/images/tablet_bg.png')] bg-center bg-cover bg-no-repeat",children:t}),D=m.createContext(null),Le=()=>{const[t,o]=m.useState("own"),[a,l]=m.useState(1);return e.jsx(D.Provider,{value:{category:t,setCategory:o,step:a,setStep:l},children:e.jsx(Ce,{children:e.jsxs("div",{className:"container mx-auto w-fit h-fit mb-[24px] px-[8px] pt-[20px] pb-[9px] bg-white rounded-[40px] shadow-default md:px-[32px] md:pb-[20px]",children:[e.jsx(Ie,{category:t,step:a}),e.jsx(De,{}),e.jsx(Pe,{})]})})})},Ee=()=>e.jsx(e.Fragment,{children:e.jsx(Le,{})});export{Ee as default};
